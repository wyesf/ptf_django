{% extends "base.html" %}

<!-- static file load -->
{% load static %}

<!-- crispy_forms bootstrap5 -->
{% load crispy_forms_tags %}

<!-- title in head tag -->
{% block title %} Dashboard {% endblock %}

<!-- contents part in body tag -->
{% block main_area %}
  <div class="container px-5 my-5">
      <h1 class="fw-bold mb-3">Chart</h1>

      <section class="row">
          <div>
            <canvas id="opexChart" style="height: 500px;"></canvas>
          </div>
      </section>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
  const ctx = document.getElementById('opexChart');
  // chart data setup
  const labels = [
  {% for od in opex_datas %}
    '{{ od.restaurant }}',
  {% endfor %}
  ];
  const priceData = [
  {% for od in opex_datas %}
    {{ od.name_count }},
  {% endfor %}
  ];
  const data = {
    labels: labels,
    datasets: [{
      label: '서울시 지역구 공무원 최다 방문수 식당',
      data: priceData,
      backgroundColor: [
        'rgba(255, 99, 132, 0.2)',
        'rgba(255, 159, 64, 0.2)',
        'rgba(255, 205, 86, 0.2)',
        'rgba(75, 192, 192, 0.2)',
        'rgba(54, 162, 235, 0.2)',
        'rgba(153, 102, 255, 0.2)',
        'rgba(201, 203, 207, 0.2)'
      ],
      borderColor: [
        'rgb(255, 99, 132)',
        'rgb(255, 159, 64)',
        'rgb(255, 205, 86)',
        'rgb(75, 192, 192)',
        'rgb(54, 162, 235)',
        'rgb(153, 102, 255)',
        'rgb(201, 203, 207)'
      ],
      borderWidth: 1
    }]
  };

  // chart configration setup
  const config = {
    type: 'bar',
    data: data,
    options: {
      scales: {
        y: {
          beginAtZero: true,
        }
      },
      responsive : true,
      responsiveAnimarionDuration : 2,
      maintainAspectRatio : false,
    },
  };

  // chart object
  // new Chart(documentd의_식별_변수, chart configration setup_기본_설정_변수)
  new Chart(ctx, config)
  </script>
  

{% endblock %}